"use strict";

var _interopRequire = function (obj) { return obj && obj.__esModule ? obj["default"] : obj; };

var _prototypeProperties = function (child, staticProps, instanceProps) { if (staticProps) Object.defineProperties(child, staticProps); if (instanceProps) Object.defineProperties(child.prototype, instanceProps); };

var _inherits = function (subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };

var _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } };

var _Flux = require("../Flux");

var Flux = _Flux.Flux;
var Store = _Flux.Store;
var Actions = _Flux.Actions;
var sinon = _interopRequire(require("sinon"));

function createSerializableStore(serializedState) {
  return (function (Store) {
    function SerializableStore() {
      _classCallCheck(this, SerializableStore);

      if (Store != null) {
        Store.apply(this, arguments);
      }
    }

    _inherits(SerializableStore, Store);

    _prototypeProperties(SerializableStore, {
      serialize: {
        value: function serialize() {
          return serializedState;
        },
        writable: true,
        configurable: true
      },
      deserialize: {
        value: function deserialize(stateString) {
          return {
            stateString: stateString,
            deserialized: true };
        },
        writable: true,
        configurable: true
      }
    });

    return SerializableStore;
  })(Store);
}

describe("Flux", function () {
  describe("#createStore()", function () {
    it("throws if key already exists", function () {
      var flux = new Flux();
      var TestStore = (function (Store) {
        function TestStore() {
          _classCallCheck(this, TestStore);

          if (Store != null) {
            Store.apply(this, arguments);
          }
        }

        _inherits(TestStore, Store);

        return TestStore;
      })(Store);

      flux.createStore("ExampleStore", TestStore);
      expect(flux.createStore.bind(flux, "ExampleStore", TestStore)).to["throw"]("You've attempted to create multiple stores with key ExampleStore. " + "Keys must be unique.");
    });

    it("throws if Store is not a prototype of class", function () {
      var flux = new Flux();
      var ForgotToExtendStore = function ForgotToExtendStore() {
        _classCallCheck(this, ForgotToExtendStore);
      };

      expect(flux.createStore.bind(flux, "Flux", ForgotToExtendStore)).to["throw"]("You've attempted to create a store from the class " + "ForgotToExtendStore, which does not have the base Store class in its " + "prototype chain. Make sure you're using the `extends` keyword: " + "`class ForgotToExtendStore extends Store { ... }`");
    });

    it("registers store's handler with central dispatcher", function () {
      var ExampleStore = (function (Store) {
        function ExampleStore() {
          _classCallCheck(this, ExampleStore);

          if (Store != null) {
            Store.apply(this, arguments);
          }
        }

        _inherits(ExampleStore, Store);

        return ExampleStore;
      })(Store);

      var spy1 = sinon.spy();
      var spy2 = sinon.spy();

      ExampleStore.prototype.foo = "bar";
      ExampleStore.prototype.handler = function (_payload) {
        spy1(_payload);
        spy2(this.foo);
      };

      var flux = new Flux();
      flux.createStore("ExampleStore", ExampleStore);

      var payload = "foobar";
      flux.dispatch("actionId", payload);
      expect(spy1.getCall(0).args[0].body).to.equal("foobar");
      expect(spy2.calledWith("bar")).to.be["true"];
    });

    it("returns the created store instance", function () {
      var ExampleStore = (function (Store) {
        function ExampleStore() {
          _classCallCheck(this, ExampleStore);

          if (Store != null) {
            Store.apply(this, arguments);
          }
        }

        _inherits(ExampleStore, Store);

        return ExampleStore;
      })(Store);

      var flux = new Flux();
      var store = flux.createStore("ExampleStore", ExampleStore);
      expect(store).to.be.an.instanceOf(ExampleStore);
    });
  });

  describe("#getStore()", function () {
    it("retrieves store for key", function () {
      var flux = new Flux();
      var TestStore = (function (Store) {
        function TestStore() {
          _classCallCheck(this, TestStore);

          if (Store != null) {
            Store.apply(this, arguments);
          }
        }

        _inherits(TestStore, Store);

        return TestStore;
      })(Store);

      flux.createStore("ExampleStore", TestStore);
      expect(flux.getStore("ExampleStore")).to.be.an.instanceOf(Store);
      expect(flux.getStore("NonexistentStore")).to.be.undefined;
    });
  });

  describe("#createActions()", function () {
    it("throws if key already exists", function () {
      var TestActions = (function (Actions) {
        function TestActions() {
          _classCallCheck(this, TestActions);

          if (Actions != null) {
            Actions.apply(this, arguments);
          }
        }

        _inherits(TestActions, Actions);

        return TestActions;
      })(Actions);

      var flux = new Flux();
      flux.createActions("ExampleActions", TestActions);

      expect(flux.createActions.bind(flux, "ExampleActions", Actions)).to["throw"]("You've attempted to create multiple actions with key ExampleActions. " + "Keys must be unique.");
    });

    it("throws if Actions is not a prototype of class", function () {
      var flux = new Flux();
      var ForgotToExtendActions = function ForgotToExtendActions() {
        _classCallCheck(this, ForgotToExtendActions);
      };

      expect(flux.createActions.bind(flux, "Flux", ForgotToExtendActions)).to["throw"]("You've attempted to create actions from the class " + "ForgotToExtendActions, which does not have the base Actions class " + "in its prototype chain. Make sure you're using the `extends` " + "keyword: `class ForgotToExtendActions extends Actions { ... }`");
    });

    it("returns the created action's instance", function () {
      var TestActions = (function (Actions) {
        function TestActions() {
          _classCallCheck(this, TestActions);

          if (Actions != null) {
            Actions.apply(this, arguments);
          }
        }

        _inherits(TestActions, Actions);

        return TestActions;
      })(Actions);

      var flux = new Flux();
      var actions = flux.createActions("TestActions", TestActions);
      expect(actions).to.be.an.instanceOf(TestActions);
    });
  });

  describe("#getActions()", function () {
    var TestActions = (function (Actions) {
      function TestActions() {
        _classCallCheck(this, TestActions);

        if (Actions != null) {
          Actions.apply(this, arguments);
        }
      }

      _inherits(TestActions, Actions);

      return TestActions;
    })(Actions);

    it("retrieves actions for key", function () {
      var flux = new Flux();
      flux.createActions("TestActions", TestActions);

      expect(flux.getActions("TestActions")).to.be.an.instanceOf(Actions);
      expect(flux.getActions("NonexistentActions")).to.be.undefined;
    });
  });

  describe("#getActionIds() / #getConstants()", function () {
    var TestActions = (function (Actions) {
      function TestActions() {
        _classCallCheck(this, TestActions);

        if (Actions != null) {
          Actions.apply(this, arguments);
        }
      }

      _inherits(TestActions, Actions);

      _prototypeProperties(TestActions, null, {
        getFoo: {
          value: function getFoo() {},
          writable: true,
          configurable: true
        }
      });

      return TestActions;
    })(Actions);

    it("retrives ids of actions for key", function () {
      var flux = new Flux();
      flux.createActions("TestActions", TestActions);

      expect(flux.getActionIds("TestActions").getFoo).to.be.a("string");
      expect(flux.getActionIds("NonexistentActions")).to.be.undefined;

      expect(flux.getConstants("TestActions").getFoo).to.be.a("string");
      expect(flux.getConstants("NonexistentActions")).to.be.undefined;
    });
  });

  describe("#dispatch()", function () {
    it("delegates to dispatcher", function () {
      var flux = new Flux();
      var dispatch = sinon.spy();
      flux.dispatcher = { dispatch: dispatch };
      var actionId = "actionId";

      flux.dispatch(actionId, "foobar");

      expect(dispatch.firstCall.args[0]).to.deep.equal({
        actionId: actionId,
        body: "foobar" });
    });

    it("emits dispatch event", function () {
      var flux = new Flux();
      var listener = sinon.spy();

      flux.addListener("dispatch", listener);

      var actionId = "actionId";

      flux.dispatch(actionId, "foobar");

      expect(listener.calledOnce).to.be["true"];
      expect(listener.firstCall.args[0]).to.deep.equal({
        actionId: actionId,
        body: "foobar"
      });
    });
  });

  describe("#dispatchAsync()", function () {
    it("delegates to dispatcher", function callee$2$0() {
      var flux, dispatch, actionId;
      return regeneratorRuntime.async(function callee$2$0$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            flux = new Flux();
            dispatch = sinon.spy();
            flux.dispatcher = { dispatch: dispatch };
            actionId = "actionId";
            context$3$0.next = 6;
            return flux.dispatchAsync(actionId, Promise.resolve("foobar"));
          case 6:


            expect(dispatch.callCount).to.equal(2);
            expect(dispatch.firstCall.args[0]).to.deep.equal({
              actionId: actionId,
              async: "begin" });
            expect(dispatch.secondCall.args[0]).to.deep.equal({
              actionId: actionId,
              body: "foobar",
              async: "success"
            });
          case 9:
          case "end":
            return context$3$0.stop();
        }
      }, null, this);
    });

    it("emits dispatch event", function callee$2$1() {
      var flux, listener, actionId;
      return regeneratorRuntime.async(function callee$2$1$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            flux = new Flux();
            listener = sinon.spy();


            flux.addListener("dispatch", listener);

            actionId = "actionId";
            context$3$0.next = 6;
            return flux.dispatchAsync(actionId, Promise.resolve("foobar"));
          case 6:


            expect(listener.calledTwice).to.be["true"];
            expect(listener.firstCall.args[0]).to.deep.equal({
              actionId: actionId,
              async: "begin" });
            expect(listener.secondCall.args[0]).to.deep.equal({
              actionId: actionId,
              async: "success",
              body: "foobar" });
          case 9:
          case "end":
            return context$3$0.stop();
        }
      }, null, this);
    });

    it("resolves to value of given promise", function (done) {
      var flux = new Flux();
      var dispatch = sinon.spy();
      flux.dispatcher = { dispatch: dispatch };
      var actionId = "actionId";

      expect(flux.dispatchAsync(actionId, Promise.resolve("foobar"))).to.eventually.equal("foobar").notify(done);
    });

    it("rejects with error if promise rejects", function (done) {
      var flux = new Flux();
      var dispatch = sinon.spy();
      flux.dispatcher = { dispatch: dispatch };
      var actionId = "actionId";

      expect(flux.dispatchAsync(actionId, Promise.reject(new Error("error")))).to.be.rejectedWith("error").notify(done);
    });

    it("dispatches with error if promise rejects", function callee$2$2() {
      var flux, dispatch, actionId, error;
      return regeneratorRuntime.async(function callee$2$2$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            flux = new Flux();
            dispatch = sinon.spy();
            flux.dispatcher = { dispatch: dispatch };
            actionId = "actionId";
            error = new Error("error");
            context$3$0.next = 7;
            return expect(flux.dispatchAsync(actionId, Promise.reject(error))).to.be.rejected;
          case 7:


            expect(dispatch.callCount).to.equal(2);
            expect(dispatch.firstCall.args[0]).to.deep.equal({
              actionId: actionId,
              async: "begin" });
            expect(dispatch.secondCall.args[0]).to.deep.equal({
              actionId: actionId,
              error: error,
              async: "failure"
            });
          case 10:
          case "end":
            return context$3$0.stop();
        }
      }, null, this);
    });

    it("emits error if promise rejects", function callee$2$3() {
      var ExampleStore, flux, listener, actionId;
      return regeneratorRuntime.async(function callee$2$3$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            ExampleStore = (function (Store) {
              function ExampleStore() {
                _classCallCheck(this, ExampleStore);

                if (Store != null) {
                  Store.apply(this, arguments);
                }
              }

              _inherits(ExampleStore, Store);

              return ExampleStore;
            })(Store);
            flux = new Flux();
            listener = sinon.spy();
            flux.addListener("error", listener);

            actionId = "actionId";
            context$3$0.next = 7;
            return expect(flux.dispatchAsync(actionId, Promise.reject(new Error("foobar")))).to.be.rejectedWith("foobar");
          case 7:


            expect(listener.calledOnce).to.be["true"];
            expect(listener.firstCall.args[0].message).to.equal("foobar");
          case 9:
          case "end":
            return context$3$0.stop();
        }
      }, null, this);
    });

    it("emit errors that occur as result of dispatch", function callee$2$4() {
      var ExampleStore, flux, listener, actionId, store;
      return regeneratorRuntime.async(function callee$2$4$(context$3$0) {
        while (1) switch (context$3$0.prev = context$3$0.next) {
          case 0:
            ExampleStore = (function (Store) {
              function ExampleStore() {
                _classCallCheck(this, ExampleStore);

                if (Store != null) {
                  Store.apply(this, arguments);
                }
              }

              _inherits(ExampleStore, Store);

              return ExampleStore;
            })(Store);
            flux = new Flux();
            listener = sinon.spy();
            flux.addListener("error", listener);

            actionId = "actionId";
            store = flux.createStore("example", ExampleStore);


            store.registerAsync(actionId, null, function () {
              throw new Error("success error");
            }, function () {
              throw new Error("failure error");
            });

            context$3$0.next = 9;
            return expect(flux.dispatchAsync(actionId, Promise.resolve("foobar"))).to.be.rejectedWith("success error");
          case 9:
            expect(listener.calledOnce).to.be["true"];
            expect(listener.firstCall.args[0].message).to.equal("success error");

            context$3$0.next = 13;
            return expect(flux.dispatchAsync(actionId, Promise.reject(new Error("foobar")))).to.be.rejectedWith("failure error");
          case 13:
            expect(listener.calledTwice).to.be["true"];
            expect(listener.secondCall.args[0].message).to.equal("failure error");
          case 15:
          case "end":
            return context$3$0.stop();
        }
      }, null, this);
    });
  });

  describe("#removeAllStoreListeners", function () {
    it("removes all listeners from stores", function () {
      var TestStore = (function (Store) {
        function TestStore() {
          _classCallCheck(this, TestStore);

          if (Store != null) {
            Store.apply(this, arguments);
          }
        }

        _inherits(TestStore, Store);

        return TestStore;
      })(Store);

      var flux = new Flux();
      var storeA = flux.createStore("storeA", TestStore);
      var storeB = flux.createStore("storeB", TestStore);

      var listener = function () {};

      storeA.addListener("change", listener);
      storeA.addListener("change", listener);
      storeB.addListener("change", listener);
      storeB.addListener("change", listener);

      expect(storeA.listeners("change").length).to.equal(2);
      expect(storeB.listeners("change").length).to.equal(2);

      flux.removeAllStoreListeners();

      expect(storeA.listeners("change").length).to.equal(0);
      expect(storeB.listeners("change").length).to.equal(0);
    });
  });

  describe("#serialize()", function () {
    it("returns state of all the stores as a JSON string", function () {
      var flux = new Flux();

      flux.createStore("foo", createSerializableStore("foo state"));
      flux.createStore("bar", createSerializableStore("bar state"));
      flux.createStore("baz", createSerializableStore("baz state"));

      expect(JSON.parse(flux.serialize())).to.deep.equal({
        foo: "foo state",
        bar: "bar state",
        baz: "baz state" });
    });

    it("ignores stores whose classes do not implement .serialize()", function () {
      var flux = new Flux();
      var TestStore = (function (Store) {
        function TestStore() {
          _classCallCheck(this, TestStore);

          if (Store != null) {
            Store.apply(this, arguments);
          }
        }

        _inherits(TestStore, Store);

        return TestStore;
      })(Store);

      flux.createStore("foo", createSerializableStore("foo state"));
      flux.createStore("bar", createSerializableStore("bar state"));
      flux.createStore("baz", TestStore);

      expect(JSON.parse(flux.serialize())).to.deep.equal({
        foo: "foo state",
        bar: "bar state" });
    });

    it("warns if any store classes .serialize() returns a non-string", function () {
      var flux = new Flux();
      var warn = sinon.spy(console, "warn");

      flux.createStore("foo", createSerializableStore({}));
      flux.serialize();

      expect(warn.firstCall.args[0]).to.equal("The store with key 'foo' was not serialized because the static " + "method `SerializableStore.serialize()` returned a non-string with " + "type 'object'.");

      console.warn.restore();
    });

    it("warns and skips stores whose classes do not implement .deserialize()", function () {
      var flux = new Flux();
      var warn = sinon.spy(console, "warn");

      var TestStore = (function (Store) {
        function TestStore() {
          _classCallCheck(this, TestStore);

          if (Store != null) {
            Store.apply(this, arguments);
          }
        }

        _inherits(TestStore, Store);

        _prototypeProperties(TestStore, {
          serialize: {
            value: function serialize() {
              return "state string";
            },
            writable: true,
            configurable: true
          }
        });

        return TestStore;
      })(Store);

      flux.createStore("test", TestStore);
      flux.serialize();

      expect(warn.firstCall.args[0]).to.equal("The class `TestStore` has a `serialize()` method, but no " + "corresponding `deserialize()` method.");

      console.warn.restore();
    });
  });

  describe("#deserialize()", function () {
    it("converts a serialized string into state and uses it to replace state of stores", function () {
      var flux = new Flux();

      flux.createStore("foo", createSerializableStore());
      flux.createStore("bar", createSerializableStore());
      flux.createStore("baz", createSerializableStore());

      flux.deserialize("{\n        \"foo\": \"foo state\",\n        \"bar\": \"bar state\",\n        \"baz\": \"baz state\"\n      }");

      var fooStore = flux.getStore("foo");
      var barStore = flux.getStore("bar");
      var bazStore = flux.getStore("baz");

      expect(fooStore.state.stateString).to.equal("foo state");
      expect(fooStore.state.deserialized).to.be["true"];
      expect(barStore.state.stateString).to.equal("bar state");
      expect(barStore.state.deserialized).to.be["true"];
      expect(bazStore.state.stateString).to.equal("baz state");
      expect(bazStore.state.deserialized).to.be["true"];
    });

    it("warns and skips if passed string is invalid JSON", function () {
      var flux = new Flux();
      var TestStore = (function (Store) {
        function TestStore() {
          _classCallCheck(this, TestStore);

          if (Store != null) {
            Store.apply(this, arguments);
          }
        }

        _inherits(TestStore, Store);

        return TestStore;
      })(Store);




      flux.createStore("foo", TestStore);

      expect(flux.deserialize.bind(flux, "not JSON")).to["throw"]("Invalid value passed to `Flux#deserialize()`: not JSON");
    });

    it("warns and skips stores whose classes do not implement .serialize()", function () {
      var flux = new Flux();
      var warn = sinon.spy(console, "warn");

      var TestStore = (function (Store) {
        function TestStore() {
          _classCallCheck(this, TestStore);

          if (Store != null) {
            Store.apply(this, arguments);
          }
        }

        _inherits(TestStore, Store);

        _prototypeProperties(TestStore, {
          deserialize: {
            value: function deserialize() {
              return {};
            },
            writable: true,
            configurable: true
          }
        });

        return TestStore;
      })(Store);

      flux.createStore("test", TestStore);
      flux.deserialize("{\"test\": \"test state\"}");

      expect(warn.firstCall.args[0]).to.equal("The class `TestStore` has a `deserialize()` method, but no " + "corresponding `serialize()` method.");

      console.warn.restore();
    });

    it("ignores stores whose classes do not implement .deserialize()", function () {
      var flux = new Flux();
      var TestStore = (function (Store) {
        function TestStore() {
          _classCallCheck(this, TestStore);

          if (Store != null) {
            Store.apply(this, arguments);
          }
        }

        _inherits(TestStore, Store);

        return TestStore;
      })(Store);

      flux.createStore("foo", createSerializableStore());
      flux.createStore("bar", createSerializableStore());
      flux.createStore("baz", TestStore);

      flux.deserialize("{\n        \"foo\": \"foo state\",\n        \"bar\": \"bar state\",\n        \"baz\": \"baz state\"\n      }");

      var fooStore = flux.getStore("foo");
      var barStore = flux.getStore("bar");
      var bazStore = flux.getStore("baz");

      expect(fooStore.state.stateString).to.equal("foo state");
      expect(fooStore.state.deserialized).to.be["true"];
      expect(barStore.state.stateString).to.equal("bar state");
      expect(barStore.state.deserialized).to.be["true"];
      expect(bazStore.state).to.be.undefined;
    });
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9fX3Rlc3RzX18vRmx1eC10ZXN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7b0JBQXFDLFNBQVM7O0lBQXJDLElBQUksU0FBSixJQUFJO0lBQUUsS0FBSyxTQUFMLEtBQUs7SUFBRSxPQUFPLFNBQVAsT0FBTztJQUN0QixLQUFLLDJCQUFNLE9BQU87O0FBRXpCLFNBQVMsdUJBQXVCLENBQUMsZUFBZSxFQUFFO0FBQ2hELG9CQUF1QyxLQUFLO2FBQS9CLGlCQUFpQjs0QkFBakIsaUJBQWlCOztVQUFTLEtBQUs7QUFBTCxhQUFLOzs7O2NBQS9CLGlCQUFpQixFQUFTLEtBQUs7O3lCQUEvQixpQkFBaUI7QUFDckIsZUFBUztlQUFBLHFCQUFHO0FBQ2pCLGlCQUFPLGVBQWUsQ0FBQztTQUN4Qjs7OztBQUNNLGlCQUFXO2VBQUEscUJBQUMsV0FBVyxFQUFFO0FBQzlCLGlCQUFPO0FBQ0wsdUJBQVcsRUFBWCxXQUFXO0FBQ1gsd0JBQVksRUFBRSxJQUFJLEVBQ25CLENBQUM7U0FDSDs7Ozs7O1dBVFUsaUJBQWlCO0tBQVMsS0FBSyxFQVUxQztDQUNIOztBQUVELFFBQVEsQ0FBQyxNQUFNLEVBQUUsWUFBTTtBQUVyQixVQUFRLENBQUMsZ0JBQWdCLEVBQUUsWUFBTTtBQUMvQixNQUFFLENBQUMsOEJBQThCLEVBQUUsWUFBTTtBQUN2QyxVQUFJLElBQUksR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDO1VBQ2hCLFNBQVMsY0FBUyxLQUFLO2lCQUF2QixTQUFTO2dDQUFULFNBQVM7O2NBQVMsS0FBSztBQUFMLGlCQUFLOzs7O2tCQUF2QixTQUFTLEVBQVMsS0FBSzs7ZUFBdkIsU0FBUztTQUFTLEtBQUs7O0FBRTdCLFVBQUksQ0FBQyxXQUFXLENBQUMsY0FBYyxFQUFFLFNBQVMsQ0FBQyxDQUFDO0FBQzVDLFlBQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsY0FBYyxFQUFFLFNBQVMsQ0FB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QyxLQUFLLENBQUMsV0FBVyxDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUN6RCxZQUFNLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxRQUFLLENBQUM7QUFDL0MsWUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQztLQUN4QyxDQUFDLENBQUM7R0FFSixDQUFDLENBQUM7Q0FFSixDQUFDLENBQUMiLCJmaWxlIjoic3JjL19fdGVzdHNfXy9GbHV4LXRlc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGbHV4LCBTdG9yZSwgQWN0aW9ucyB9IGZyb20gJy4uL0ZsdXgnO1xuaW1wb3J0IHNpbm9uIGZyb20gJ3Npbm9uJztcblxuZnVuY3Rpb24gY3JlYXRlU2VyaWFsaXphYmxlU3RvcmUoc2VyaWFsaXplZFN0YXRlKSB7XG4gIHJldHVybiBjbGFzcyBTZXJpYWxpemFibGVTdG9yZSBleHRlbmRzIFN0b3JlIHtcbiAgICBzdGF0aWMgc2VyaWFsaXplKCkge1xuICAgICAgcmV0dXJuIHNlcmlhbGl6ZWRTdGF0ZTtcbiAgICB9XG4gICAgc3RhdGljIGRlc2VyaWFsaXplKHN0YXRlU3RyaW5nKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdGF0ZVN0cmluZyxcbiAgICAgICAgZGVzZXJpYWxpemVkOiB0cnVlLFxuICAgICAgfTtcbiAgICB9XG4gIH07XG59XG5cbmRlc2NyaWJlKCdGbHV4JywgKCkgPT4ge1xuXG4gIGRlc2NyaWJlKCcjY3JlYXRlU3RvcmUoKScsICgpID0+IHtcbiAgICBpdCgndGhyb3dzIGlmIGtleSBhbHJlYWR5IGV4aXN0cycsICgpID0+IHtcbiAgICAgIGxldCBmbHV4ID0gbmV3IEZsdXgoKTtcbiAgICAgIGNsYXNzIFRlc3RTdG9yZSBleHRlbmRzIFN0b3JlIHt9XG5cbiAgICAgIGZsdXguY3JlYXRlU3RvcmUoJ0V4YW1wbGVTdG9yZScsIFRlc3RTdG9yZSk7XG4gICAgICBleHBlY3QoZmx1eC5jcmVhdGVTdG9yZS5iaW5kKGZsdXgsICdFeGFtcGxlU3RvcmUnLCBUZXN0U3RvcmUpKS50by50aHJvdyhcbiAgICAgICAgJ1lvdVxcJ3ZlIGF0dGVtcHRlZCB0byBjcmVhdGUgbXVsdGlwbGUgc3RvcmVzIHdpdGgga2V5IEV4YW1wbGVTdG9yZS4gJ1xuICAgICAgKyAnS2V5cyBtdXN0IGJlIHVuaXF1ZS4nXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Rocm93cyBpZiBTdG9yZSBpcyBub3QgYSBwcm90b3R5cGUgb2YgY2xhc3MnLCAoKSA9PiB7XG4gICAgICBsZXQgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBjbGFzcyBGb3Jnb3RUb0V4dGVuZFN0b3JlIHt9XG5cbiAgICAgIGV4cGVjdChmbHV4LmNyZWF0ZVN0b3JlLmJpbmQoZmx1eCwgJ0ZsdXgnLCBGb3Jnb3RUb0V4dGVuZFN0b3JlKSkudG8udGhyb3coXG4gICAgICAgICdZb3VcXCd2ZSBhdHRlbXB0ZWQgdG8gY3JlYXRlIGEgc3RvcmUgZnJvbSB0aGUgY2xhc3MgJ1xuICAgICAgKyAnRm9yZ290VG9FeHRlbmRTdG9yZSwgd2hpY2ggZG9lcyBub3QgaGF2ZSB0aGUgYmFzZSBTdG9yZSBjbGFzcyBpbiBpdHMgJ1xuICAgICAgKyAncHJvdG90eXBlIGNoYWluLiBNYWtlIHN1cmUgeW91XFwncmUgdXNpbmcgdGhlIGBleHRlbmRzYCBrZXl3b3JkOiAnXG4gICAgICArICdgY2xhc3MgRm9yZ290VG9FeHRlbmRTdG9yZSBleHRlbmRzIFN0b3JlIHsgLi4uIH1gJ1xuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdyZWdpc3RlcnMgc3RvcmVcXCdzIGhhbmRsZXIgd2l0aCBjZW50cmFsIGRpc3BhdGNoZXInLCAoKSA9PiB7XG4gICAgICBjbGFzcyBFeGFtcGxlU3RvcmUgZXh0ZW5kcyBTdG9yZSB7fVxuXG4gICAgICBsZXQgc3B5MSA9IHNpbm9uLnNweSgpO1xuICAgICAgbGV0IHNweTIgPSBzaW5vbi5zcHkoKTtcblxuICAgICAgRXhhbXBsZVN0b3JlLnByb3RvdHlwZS5mb28gPSAnYmFyJztcbiAgICAgIEV4YW1wbGVTdG9yZS5wcm90b3R5cGUuaGFuZGxlciA9IGZ1bmN0aW9uKF9wYXlsb2FkKSB7XG4gICAgICAgIHNweTEoX3BheWxvYWQpO1xuICAgICAgICBzcHkyKHRoaXMuZm9vKTtcbiAgICAgIH07XG5cbiAgICAgIGxldCBmbHV4ID0gbmV3IEZsdXgoKTtcbiAgICAgIGZsdXguY3JlYXRlU3RvcmUoJ0V4YW1wbGVTdG9yZScsIEV4YW1wbGVTdG9yZSk7XG5cbiAgICAgIGxldCBwYXlsb2FkID0gJ2Zvb2Jhcic7XG4gICAgICBmbHV4LmRpc3BhdGNoKCdhY3Rpb25JZCcsIHBheWxvYWQpO1xuICAgICAgZXhwZWN0KHNweTEuZ2V0Q2FsbCgwKS5hcmdzWzBdLmJvZHkpLnRvLmVxdWFsKCdmb29iYXInKTtcbiAgICAgIGV4cGVjdChzcHkyLmNhbGxlZFdpdGgoJ2JhcicpKS50by5iZS50cnVlO1xuICAgIH0pO1xuXG4gICAgaXQoJ3JldHVybnMgdGhlIGNyZWF0ZWQgc3RvcmUgaW5zdGFuY2UnLCAoKSA9PiB7XG4gICAgICBjbGFzcyBFeGFtcGxlU3RvcmUgZXh0ZW5kcyBTdG9yZSB7fVxuXG4gICAgICBsZXQgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBsZXQgc3RvcmUgPSBmbHV4LmNyZWF0ZVN0b3JlKCdFeGFtcGxlU3RvcmUnLCBFeGFtcGxlU3RvcmUpO1xuICAgICAgZXhwZWN0KHN0b3JlKS50by5iZS5hbi5pbnN0YW5jZU9mKEV4YW1wbGVTdG9yZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCcjZ2V0U3RvcmUoKScsICgpID0+IHtcbiAgICBpdCgncmV0cmlldmVzIHN0b3JlIGZvciBrZXknLCAoKSA9PiB7XG4gICAgICBsZXQgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBjbGFzcyBUZXN0U3RvcmUgZXh0ZW5kcyBTdG9yZSB7fVxuXG4gICAgICBmbHV4LmNyZWF0ZVN0b3JlKCdFeGFtcGxlU3RvcmUnLCBUZXN0U3RvcmUpO1xuICAgICAgZXhwZWN0KGZsdXguZ2V0U3RvcmUoJ0V4YW1wbGVTdG9yZScpKS50by5iZS5hbi5pbnN0YW5jZU9mKFN0b3JlKTtcbiAgICAgIGV4cGVjdChmbHV4LmdldFN0b3JlKCdOb25leGlzdGVudFN0b3JlJykpLnRvLmJlLnVuZGVmaW5lZDtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJyNjcmVhdGVBY3Rpb25zKCknLCAoKSA9PiB7XG4gICAgaXQoJ3Rocm93cyBpZiBrZXkgYWxyZWFkeSBleGlzdHMnLCAoKSA9PiB7XG4gICAgICBjbGFzcyBUZXN0QWN0aW9ucyBleHRlbmRzIEFjdGlvbnMge31cblxuICAgICAgbGV0IGZsdXggPSBuZXcgRmx1eCgpO1xuICAgICAgZmx1eC5jcmVhdGVBY3Rpb25zKCdFeGFtcGxlQWN0aW9ucycsIFRlc3RBY3Rpb25zKTtcblxuICAgICAgZXhwZWN0KGZsdXguY3JlYXRlQWN0aW9ucy5iaW5kKGZsdXgsICdFeGFtcGxlQWN0aW9ucycsIEFjdGlvbnMpKS50by50aHJvdyhcbiAgICAgICAgJ1lvdVxcJ3ZlIGF0dGVtcHRlZCB0byBjcmVhdGUgbXVsdGlwbGUgYWN0aW9ucyB3aXRoIGtleSBFeGFtcGxlQWN0aW9ucy4gJ1xuICAgICAgKyAnS2V5cyBtdXN0IGJlIHVuaXF1ZS4nXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Rocm93cyBpZiBBY3Rpb25zIGlzIG5vdCBhIHByb3RvdHlwZSBvZiBjbGFzcycsICgpID0+IHtcbiAgICAgIGxldCBmbHV4ID0gbmV3IEZsdXgoKTtcbiAgICAgIGNsYXNzIEZvcmdvdFRvRXh0ZW5kQWN0aW9ucyB7fVxuXG4gICAgICBleHBlY3QoZmx1eC5jcmVhdGVBY3Rpb25zLmJpbmQoZmx1eCwgJ0ZsdXgnLCBGb3Jnb3RUb0V4dGVuZEFjdGlvbnMpKVxuICAgICAgICAudG8udGhyb3coXG4gICAgICAgICAgJ1lvdVxcJ3ZlIGF0dGVtcHRlZCB0byBjcmVhdGUgYWN0aW9ucyBmcm9tIHRoZSBjbGFzcyAnXG4gICAgICAgICsgJ0ZvcmdvdFRvRXh0ZW5kQWN0aW9ucywgd2hpY2ggZG9lcyBub3QgaGF2ZSB0aGUgYmFzZSBBY3Rpb25zIGNsYXNzICdcbiAgICAgICAgKyAnaW4gaXRzIHByb3RvdHlwZSBjaGFpbi4gTWFrZSBzdXJlIHlvdVxcJ3JlIHVzaW5nIHRoZSBgZXh0ZW5kc2AgJ1xuICAgICAgICArICdrZXl3b3JkOiBgY2xhc3MgRm9yZ290VG9FeHRlbmRBY3Rpb25zIGV4dGVuZHMgQWN0aW9ucyB7IC4uLiB9YCdcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgncmV0dXJucyB0aGUgY3JlYXRlZCBhY3Rpb25cXCdzIGluc3RhbmNlJywgKCkgPT4ge1xuICAgICAgY2xhc3MgVGVzdEFjdGlvbnMgZXh0ZW5kcyBBY3Rpb25zIHt9XG5cbiAgICAgIGxldCBmbHV4ID0gbmV3IEZsdXgoKTtcbiAgICAgIGxldCBhY3Rpb25zID0gZmx1eC5jcmVhdGVBY3Rpb25zKCdUZXN0QWN0aW9ucycsIFRlc3RBY3Rpb25zKTtcbiAgICAgIGV4cGVjdChhY3Rpb25zKS50by5iZS5hbi5pbnN0YW5jZU9mKFRlc3RBY3Rpb25zKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJyNnZXRBY3Rpb25zKCknLCAoKSA9PiB7XG4gICAgY2xhc3MgVGVzdEFjdGlvbnMgZXh0ZW5kcyBBY3Rpb25zIHt9XG5cbiAgICBpdCgncmV0cmlldmVzIGFjdGlvbnMgZm9yIGtleScsICgpID0+IHtcbiAgICAgIGxldCBmbHV4ID0gbmV3IEZsdXgoKTtcbiAgICAgIGZsdXguY3JlYXRlQWN0aW9ucygnVGVzdEFjdGlvbnMnLCBUZXN0QWN0aW9ucyk7XG5cbiAgICAgIGV4cGVjdChmbHV4LmdldEFjdGlvbnMoJ1Rlc3RBY3Rpb25zJykpLnRvLmJlLmFuLmluc3RhbmNlT2YoQWN0aW9ucyk7XG4gICAgICBleHBlY3QoZmx1eC5nZXRBY3Rpb25zKCdOb25leGlzdGVudEFjdGlvbnMnKSkudG8uYmUudW5kZWZpbmVkO1xuICAgIH0pO1xuXG4gIH0pO1xuXG4gIGRlc2NyaWJlKCcjZ2V0QWN0aW9uSWRzKCkgLyAjZ2V0Q29uc3RhbnRzKCknLCAoKSA9PiB7XG4gICAgY2xhc3MgVGVzdEFjdGlvbnMgZXh0ZW5kcyBBY3Rpb25zIHtcbiAgICAgIGdldEZvbygpIHt9XG4gICAgfVxuXG4gICAgaXQoJ3JldHJpdmVzIGlkcyBvZiBhY3Rpb25zIGZvciBrZXknLCAoKSA9PiB7XG4gICAgICBsZXQgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBmbHV4LmNyZWF0ZUFjdGlvbnMoJ1Rlc3RBY3Rpb25zJywgVGVzdEFjdGlvbnMpO1xuXG4gICAgICBleHBlY3QoZmx1eC5nZXRBY3Rpb25JZHMoJ1Rlc3RBY3Rpb25zJykuZ2V0Rm9vKS50by5iZS5hKCdzdHJpbmcnKTtcbiAgICAgIGV4cGVjdChmbHV4LmdldEFjdGlvbklkcygnTm9uZXhpc3RlbnRBY3Rpb25zJykpLnRvLmJlLnVuZGVmaW5lZDtcblxuICAgICAgZXhwZWN0KGZsdXguZ2V0Q29uc3RhbnRzKCdUZXN0QWN0aW9ucycpLmdldEZvbykudG8uYmUuYSgnc3RyaW5nJyk7XG4gICAgICBleHBlY3QoZmx1eC5nZXRDb25zdGFudHMoJ05vbmV4aXN0ZW50QWN0aW9ucycpKS50by5iZS51bmRlZmluZWQ7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCcjZGlzcGF0Y2goKScsICgpID0+IHtcblxuICAgIGl0KCdkZWxlZ2F0ZXMgdG8gZGlzcGF0Y2hlcicsICgpID0+IHtcbiAgICAgIGxldCBmbHV4ID0gbmV3IEZsdXgoKTtcbiAgICAgIGxldCBkaXNwYXRjaCA9IHNpbm9uLnNweSgpO1xuICAgICAgZmx1eC5kaXNwYXRjaGVyID0geyBkaXNwYXRjaCB9O1xuICAgICAgbGV0IGFjdGlvbklkID0gJ2FjdGlvbklkJztcblxuICAgICAgZmx1eC5kaXNwYXRjaChhY3Rpb25JZCwgJ2Zvb2JhcicpO1xuXG4gICAgICBleHBlY3QoZGlzcGF0Y2guZmlyc3RDYWxsLmFyZ3NbMF0pLnRvLmRlZXAuZXF1YWwoe1xuICAgICAgICBhY3Rpb25JZCxcbiAgICAgICAgYm9keTogJ2Zvb2JhcicsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdlbWl0cyBkaXNwYXRjaCBldmVudCcsICgpID0+IHtcbiAgICAgIGxldCBmbHV4ID0gbmV3IEZsdXgoKTtcbiAgICAgIGxldCBsaXN0ZW5lciA9IHNpbm9uLnNweSgpO1xuXG4gICAgICBmbHV4LmFkZExpc3RlbmVyKCdkaXNwYXRjaCcsIGxpc3RlbmVyKTtcblxuICAgICAgbGV0IGFjdGlvbklkID0gJ2FjdGlvbklkJztcblxuICAgICAgZmx1eC5kaXNwYXRjaChhY3Rpb25JZCwgJ2Zvb2JhcicpO1xuXG4gICAgICBleHBlY3QobGlzdGVuZXIuY2FsbGVkT25jZSkudG8uYmUudHJ1ZTtcbiAgICAgIGV4cGVjdChsaXN0ZW5lci5maXJzdENhbGwuYXJnc1swXSkudG8uZGVlcC5lcXVhbCh7XG4gICAgICAgIGFjdGlvbklkLFxuICAgICAgICBib2R5OiAnZm9vYmFyJ1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCcjZGlzcGF0Y2hBc3luYygpJywgKCkgPT4ge1xuXG4gICAgaXQoJ2RlbGVnYXRlcyB0byBkaXNwYXRjaGVyJywgYXN5bmMgZnVuY3Rpb24oKSB7XG4gICAgICBsZXQgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBsZXQgZGlzcGF0Y2ggPSBzaW5vbi5zcHkoKTtcbiAgICAgIGZsdXguZGlzcGF0Y2hlciA9IHsgZGlzcGF0Y2ggfTtcbiAgICAgIGxldCBhY3Rpb25JZCA9ICdhY3Rpb25JZCc7XG5cbiAgICAgIGF3YWl0IGZsdXguZGlzcGF0Y2hBc3luYyhhY3Rpb25JZCwgUHJvbWlzZS5yZXNvbHZlKCdmb29iYXInKSk7XG5cbiAgICAgIGV4cGVjdChkaXNwYXRjaC5jYWxsQ291bnQpLnRvLmVxdWFsKDIpO1xuICAgICAgZXhwZWN0KGRpc3BhdGNoLmZpcnN0Q2FsbC5hcmdzWzBdKS50by5kZWVwLmVxdWFsKHtcbiAgICAgICAgYWN0aW9uSWQsXG4gICAgICAgIGFzeW5jOiAnYmVnaW4nLFxuICAgICAgfSk7XG4gICAgICBleHBlY3QoZGlzcGF0Y2guc2Vjb25kQ2FsbC5hcmdzWzBdKS50by5kZWVwLmVxdWFsKHtcbiAgICAgICAgYWN0aW9uSWQsXG4gICAgICAgIGJvZHk6ICdmb29iYXInLFxuICAgICAgICBhc3luYzogJ3N1Y2Nlc3MnXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdlbWl0cyBkaXNwYXRjaCBldmVudCcsIGFzeW5jIGZ1bmN0aW9uKCkge1xuICAgICAgbGV0IGZsdXggPSBuZXcgRmx1eCgpO1xuICAgICAgbGV0IGxpc3RlbmVyID0gc2lub24uc3B5KCk7XG5cbiAgICAgIGZsdXguYWRkTGlzdGVuZXIoJ2Rpc3BhdGNoJywgbGlzdGVuZXIpO1xuXG4gICAgICBsZXQgYWN0aW9uSWQgPSAnYWN0aW9uSWQnO1xuXG4gICAgICBhd2FpdCBmbHV4LmRpc3BhdGNoQXN5bmMoYWN0aW9uSWQsIFByb21pc2UucmVzb2x2ZSgnZm9vYmFyJykpO1xuXG4gICAgICBleHBlY3QobGlzdGVuZXIuY2FsbGVkVHdpY2UpLnRvLmJlLnRydWU7XG4gICAgICBleHBlY3QobGlzdGVuZXIuZmlyc3RDYWxsLmFyZ3NbMF0pLnRvLmRlZXAuZXF1YWwoe1xuICAgICAgICBhY3Rpb25JZCxcbiAgICAgICAgYXN5bmM6ICdiZWdpbicsXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChsaXN0ZW5lci5zZWNvbmRDYWxsLmFyZ3NbMF0pLnRvLmRlZXAuZXF1YWwoe1xuICAgICAgICBhY3Rpb25JZCxcbiAgICAgICAgYXN5bmM6ICdzdWNjZXNzJyxcbiAgICAgICAgYm9keTogJ2Zvb2JhcicsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdyZXNvbHZlcyB0byB2YWx1ZSBvZiBnaXZlbiBwcm9taXNlJywgZG9uZSA9PiB7XG4gICAgICBsZXQgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBsZXQgZGlzcGF0Y2ggPSBzaW5vbi5zcHkoKTtcbiAgICAgIGZsdXguZGlzcGF0Y2hlciA9IHsgZGlzcGF0Y2ggfTtcbiAgICAgIGxldCBhY3Rpb25JZCA9ICdhY3Rpb25JZCc7XG5cbiAgICAgIGV4cGVjdChmbHV4LmRpc3BhdGNoQXN5bmMoYWN0aW9uSWQsIFByb21pc2UucmVzb2x2ZSgnZm9vYmFyJykpKVxuICAgICAgICAudG8uZXZlbnR1YWxseS5lcXVhbCgnZm9vYmFyJylcbiAgICAgICAgLm5vdGlmeShkb25lKTtcbiAgICB9KTtcblxuICAgIGl0KCdyZWplY3RzIHdpdGggZXJyb3IgaWYgcHJvbWlzZSByZWplY3RzJywgZG9uZSA9PiB7XG4gICAgICBsZXQgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBsZXQgZGlzcGF0Y2ggPSBzaW5vbi5zcHkoKTtcbiAgICAgIGZsdXguZGlzcGF0Y2hlciA9IHsgZGlzcGF0Y2ggfTtcbiAgICAgIGxldCBhY3Rpb25JZCA9ICdhY3Rpb25JZCc7XG5cbiAgICAgIGV4cGVjdChmbHV4LmRpc3BhdGNoQXN5bmMoYWN0aW9uSWQsIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignZXJyb3InKSkpKVxuICAgICAgICAudG8uYmUucmVqZWN0ZWRXaXRoKCdlcnJvcicpXG4gICAgICAgIC5ub3RpZnkoZG9uZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnZGlzcGF0Y2hlcyB3aXRoIGVycm9yIGlmIHByb21pc2UgcmVqZWN0cycsIGFzeW5jIGZ1bmN0aW9uKCkge1xuICAgICAgbGV0IGZsdXggPSBuZXcgRmx1eCgpO1xuICAgICAgbGV0IGRpc3BhdGNoID0gc2lub24uc3B5KCk7XG4gICAgICBmbHV4LmRpc3BhdGNoZXIgPSB7IGRpc3BhdGNoIH07XG4gICAgICBsZXQgYWN0aW9uSWQgPSAnYWN0aW9uSWQnO1xuXG4gICAgICBsZXQgZXJyb3IgPSBuZXcgRXJyb3IoJ2Vycm9yJyk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChmbHV4LmRpc3BhdGNoQXN5bmMoYWN0aW9uSWQsIFByb21pc2UucmVqZWN0KGVycm9yKSkpXG4gICAgICAgIC50by5iZS5yZWplY3RlZDtcblxuICAgICAgZXhwZWN0KGRpc3BhdGNoLmNhbGxDb3VudCkudG8uZXF1YWwoMik7XG4gICAgICBleHBlY3QoZGlzcGF0Y2guZmlyc3RDYWxsLmFyZ3NbMF0pLnRvLmRlZXAuZXF1YWwoe1xuICAgICAgICBhY3Rpb25JZCxcbiAgICAgICAgYXN5bmM6ICdiZWdpbicsXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChkaXNwYXRjaC5zZWNvbmRDYWxsLmFyZ3NbMF0pLnRvLmRlZXAuZXF1YWwoe1xuICAgICAgICBhY3Rpb25JZCxcbiAgICAgICAgZXJyb3IsXG4gICAgICAgIGFzeW5jOiAnZmFpbHVyZSdcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ2VtaXRzIGVycm9yIGlmIHByb21pc2UgcmVqZWN0cycsIGFzeW5jIGZ1bmN0aW9uKCkge1xuICAgICAgY2xhc3MgRXhhbXBsZVN0b3JlIGV4dGVuZHMgU3RvcmUge31cblxuICAgICAgbGV0IGZsdXggPSBuZXcgRmx1eCgpO1xuICAgICAgbGV0IGxpc3RlbmVyID0gc2lub24uc3B5KCk7XG4gICAgICBmbHV4LmFkZExpc3RlbmVyKCdlcnJvcicsIGxpc3RlbmVyKTtcblxuICAgICAgbGV0IGFjdGlvbklkID0gJ2FjdGlvbklkJztcblxuICAgICAgYXdhaXQgZXhwZWN0KGZsdXguZGlzcGF0Y2hBc3luYyhhY3Rpb25JZCwgUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdmb29iYXInKSkpKVxuICAgICAgICAudG8uYmUucmVqZWN0ZWRXaXRoKCdmb29iYXInKTtcblxuICAgICAgZXhwZWN0KGxpc3RlbmVyLmNhbGxlZE9uY2UpLnRvLmJlLnRydWU7XG4gICAgICBleHBlY3QobGlzdGVuZXIuZmlyc3RDYWxsLmFyZ3NbMF0ubWVzc2FnZSkudG8uZXF1YWwoJ2Zvb2JhcicpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2VtaXQgZXJyb3JzIHRoYXQgb2NjdXIgYXMgcmVzdWx0IG9mIGRpc3BhdGNoJywgYXN5bmMgZnVuY3Rpb24oKSB7XG4gICAgICBjbGFzcyBFeGFtcGxlU3RvcmUgZXh0ZW5kcyBTdG9yZSB7fVxuXG4gICAgICBsZXQgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBsZXQgbGlzdGVuZXIgPSBzaW5vbi5zcHkoKTtcbiAgICAgIGZsdXguYWRkTGlzdGVuZXIoJ2Vycm9yJywgbGlzdGVuZXIpO1xuXG4gICAgICBsZXQgYWN0aW9uSWQgPSAnYWN0aW9uSWQnO1xuICAgICAgbGV0IHN0b3JlID0gZmx1eC5jcmVhdGVTdG9yZSgnZXhhbXBsZScsIEV4YW1wbGVTdG9yZSk7XG5cbiAgICAgIHN0b3JlLnJlZ2lzdGVyQXN5bmMoXG4gICAgICAgIGFjdGlvbklkLFxuICAgICAgICBudWxsLFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzdWNjZXNzIGVycm9yJyk7XG4gICAgICAgIH0sXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2ZhaWx1cmUgZXJyb3InKTtcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KGZsdXguZGlzcGF0Y2hBc3luYyhhY3Rpb25JZCwgUHJvbWlzZS5yZXNvbHZlKCdmb29iYXInKSkpXG4gICAgICAgIC50by5iZS5yZWplY3RlZFdpdGgoJ3N1Y2Nlc3MgZXJyb3InKTtcbiAgICAgIGV4cGVjdChsaXN0ZW5lci5jYWxsZWRPbmNlKS50by5iZS50cnVlO1xuICAgICAgZXhwZWN0KGxpc3RlbmVyLmZpcnN0Q2FsbC5hcmdzWzBdLm1lc3NhZ2UpLnRvLmVxdWFsKCdzdWNjZXNzIGVycm9yJyk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChmbHV4LmRpc3BhdGNoQXN5bmMoYWN0aW9uSWQsIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignZm9vYmFyJykpKSlcbiAgICAgICAgLnRvLmJlLnJlamVjdGVkV2l0aCgnZmFpbHVyZSBlcnJvcicpO1xuICAgICAgZXhwZWN0KGxpc3RlbmVyLmNhbGxlZFR3aWNlKS50by5iZS50cnVlO1xuICAgICAgZXhwZWN0KGxpc3RlbmVyLnNlY29uZENhbGwuYXJnc1swXS5tZXNzYWdlKS50by5lcXVhbCgnZmFpbHVyZSBlcnJvcicpO1xuICAgIH0pO1xuXG4gIH0pO1xuXG4gIGRlc2NyaWJlKCcjcmVtb3ZlQWxsU3RvcmVMaXN0ZW5lcnMnLCAoKSA9PiB7XG4gICAgaXQoJ3JlbW92ZXMgYWxsIGxpc3RlbmVycyBmcm9tIHN0b3JlcycsICgpID0+IHtcbiAgICAgIGNsYXNzIFRlc3RTdG9yZSBleHRlbmRzIFN0b3JlIHt9XG5cbiAgICAgIGxldCBmbHV4ID0gbmV3IEZsdXgoKTtcbiAgICAgIGxldCBzdG9yZUEgPSBmbHV4LmNyZWF0ZVN0b3JlKCdzdG9yZUEnLCBUZXN0U3RvcmUpO1xuICAgICAgbGV0IHN0b3JlQiA9IGZsdXguY3JlYXRlU3RvcmUoJ3N0b3JlQicsIFRlc3RTdG9yZSk7XG5cbiAgICAgIGxldCBsaXN0ZW5lciA9IGZ1bmN0aW9uKCkge307XG5cbiAgICAgIHN0b3JlQS5hZGRMaXN0ZW5lcignY2hhbmdlJywgbGlzdGVuZXIpO1xuICAgICAgc3RvcmVBLmFkZExpc3RlbmVyKCdjaGFuZ2UnLCBsaXN0ZW5lcik7XG4gICAgICBzdG9yZUIuYWRkTGlzdGVuZXIoJ2NoYW5nZScsIGxpc3RlbmVyKTtcbiAgICAgIHN0b3JlQi5hZGRMaXN0ZW5lcignY2hhbmdlJywgbGlzdGVuZXIpO1xuXG4gICAgICBleHBlY3Qoc3RvcmVBLmxpc3RlbmVycygnY2hhbmdlJykubGVuZ3RoKS50by5lcXVhbCgyKTtcbiAgICAgIGV4cGVjdChzdG9yZUIubGlzdGVuZXJzKCdjaGFuZ2UnKS5sZW5ndGgpLnRvLmVxdWFsKDIpO1xuXG4gICAgICBmbHV4LnJlbW92ZUFsbFN0b3JlTGlzdGVuZXJzKCk7XG5cbiAgICAgIGV4cGVjdChzdG9yZUEubGlzdGVuZXJzKCdjaGFuZ2UnKS5sZW5ndGgpLnRvLmVxdWFsKDApO1xuICAgICAgZXhwZWN0KHN0b3JlQi5saXN0ZW5lcnMoJ2NoYW5nZScpLmxlbmd0aCkudG8uZXF1YWwoMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCcjc2VyaWFsaXplKCknLCAoKSA9PiB7XG5cbiAgICBpdCgncmV0dXJucyBzdGF0ZSBvZiBhbGwgdGhlIHN0b3JlcyBhcyBhIEpTT04gc3RyaW5nJywgKCkgPT4ge1xuICAgICAgbGV0IGZsdXggPSBuZXcgRmx1eCgpO1xuXG4gICAgICBmbHV4LmNyZWF0ZVN0b3JlKCdmb28nLCBjcmVhdGVTZXJpYWxpemFibGVTdG9yZSgnZm9vIHN0YXRlJykpO1xuICAgICAgZmx1eC5jcmVhdGVTdG9yZSgnYmFyJywgY3JlYXRlU2VyaWFsaXphYmxlU3RvcmUoJ2JhciBzdGF0ZScpKTtcbiAgICAgIGZsdXguY3JlYXRlU3RvcmUoJ2JheicsIGNyZWF0ZVNlcmlhbGl6YWJsZVN0b3JlKCdiYXogc3RhdGUnKSk7XG5cbiAgICAgIGV4cGVjdChKU09OLnBhcnNlKGZsdXguc2VyaWFsaXplKCkpKS50by5kZWVwLmVxdWFsKHtcbiAgICAgICAgZm9vOiAnZm9vIHN0YXRlJyxcbiAgICAgICAgYmFyOiAnYmFyIHN0YXRlJyxcbiAgICAgICAgYmF6OiAnYmF6IHN0YXRlJyxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ2lnbm9yZXMgc3RvcmVzIHdob3NlIGNsYXNzZXMgZG8gbm90IGltcGxlbWVudCAuc2VyaWFsaXplKCknLCAoKSA9PiB7XG4gICAgICBsZXQgZmx1eCA9IG5ldyBGbHV4KCk7XG4gICAgICBjbGFzcyBUZXN0U3RvcmUgZXh0ZW5kcyBTdG9yZSB7fVxuXG4gICAgICBmbHV4LmNyZWF0ZVN0b3JlKCdmb28nLCBjcmVhdGVTZXJpYWxpemFibGVTdG9yZSgnZm9vIHN0YXRlJykpO1xuICAgICAgZmx1eC5jcmVhdGVTdG9yZSgnYmFyJywgY3JlYXRlU2VyaWFsaXphYmxlU3RvcmUoJ2JhciBzdGF0ZScpKTtcbiAgICAgIGZsdXguY3JlYXRlU3RvcmUoJ2JheicsIFRlc3RTdG9yZSk7XG5cbiAgICAgIGV4cGVjdChKU09OLnBhcnNlKGZsdXguc2VyaWFsaXplKCkpKS50by5kZWVwLmVxdWFsKHtcbiAgICAgICAgZm9vOiAnZm9vIHN0YXRlJyxcbiAgICAgICAgYmFyOiAnYmFyIHN0YXRlJyxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3dhcm5zIGlmIGFueSBzdG9yZSBjbGFzc2VzIC5zZXJpYWxpemUoKSByZXR1cm5zIGEgbm9uLXN0cmluZycsICgpID0+IHtcbiAgICAgIGxldCBmbHV4ID0gbmV3IEZsdXgoKTtcbiAgICAgIGxldCB3YXJuID0gc2lub24uc3B5KGNvbnNvbGUsICd3YXJuJyk7XG5cbiAgICAgIGZsdXguY3JlYXRlU3RvcmUoJ2ZvbycsIGNyZWF0ZVNlcmlhbGl6YWJsZVN0b3JlKHt9KSk7XG4gICAgICBmbHV4LnNlcmlhbGl6ZSgpO1xuXG4gICAgICBleHBlY3Qod2Fybi5maXJzdENhbGwuYXJnc1swXSkudG8uZXF1YWwoXG4gICAgICAgICdUaGUgc3RvcmUgd2l0aCBrZXkgXFwnZm9vXFwnIHdhcyBub3Qgc2VyaWFsaXplZCBiZWNhdXNlIHRoZSBzdGF0aWMgJ1xuICAgICAgKyAnbWV0aG9kIGBTZXJpYWxpemFibGVTdG9yZS5zZXJpYWxpemUoKWAgcmV0dXJuZWQgYSBub24tc3RyaW5nIHdpdGggJ1xuICAgICAgKyAndHlwZSBcXCdvYmplY3RcXCcuJ1xuICAgICAgKTtcblxuICAgICAgY29uc29sZS53YXJuLnJlc3RvcmUoKTtcbiAgICB9KTtcblxuICAgIGl0KCd3YXJucyBhbmQgc2tpcHMgc3RvcmVzIHdob3NlIGNsYXNzZXMgZG8gbm90IGltcGxlbWVudCAuZGVzZXJpYWxpemUoKScsICgpID0+IHtcbiAgICAgIGxldCBmbHV4ID0gbmV3IEZsdXgoKTtcbiAgICAgIGxldCB3YXJuID0gc2lub24uc3B5KGNvbnNvbGUsICd3YXJuJyk7XG5cbiAgICAgIGNsYXNzIFRlc3RTdG9yZSBleHRlbmRzIFN0b3JlIHtcbiAgICAgICAgc3RhdGljIHNlcmlhbGl6ZSgpIHtcbiAgICAgICAgICByZXR1cm4gJ3N0YXRlIHN0cmluZyc7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZmx1eC5jcmVhdGVTdG9yZSgndGVzdCcsIFRlc3RTdG9yZSk7XG4gICAgICBmbHV4LnNlcmlhbGl6ZSgpO1xuXG4gICAgICBleHBlY3Qod2Fybi5maXJzdENhbGwuYXJnc1swXSkudG8uZXF1YWwoXG4gICAgICAgICdUaGUgY2xhc3MgYFRlc3RTdG9yZWAgaGFzIGEgYHNlcmlhbGl6ZSgpYCBtZXRob2QsIGJ1dCBubyAnXG4gICAgICArICdjb3JyZXNwb25kaW5nIGBkZXNlcmlhbGl6ZSgpYCBtZXRob2QuJ1xuICAgICAgKTtcblxuICAgICAgY29uc29sZS53YXJuLnJlc3RvcmUoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJyNkZXNlcmlhbGl6ZSgpJywgKCkgPT4ge1xuXG4gICAgaXQoJ2NvbnZlcnRzIGEgc2VyaWFsaXplZCBzdHJpbmcgaW50byBzdGF0ZSBhbmQgdXNlcyBpdCB0byByZXBsYWNlIHN0YXRlIG9mIHN0b3JlcycsICgpID0+IHtcbiAgICAgIGxldCBmbHV4ID0gbmV3IEZsdXgoKTtcblxuICAgICAgZmx1eC5jcmVhdGVTdG9yZSgnZm9vJywgY3JlYXRlU2VyaWFsaXphYmxlU3RvcmUoKSk7XG4gICAgICBmbHV4LmNyZWF0ZVN0b3JlKCdiYXInLCBjcmVhdGVTZXJpYWxpemFibGVTdG9yZSgpKTtcbiAgICAgIGZsdXguY3JlYXRlU3RvcmUoJ2JheicsIGNyZWF0ZVNlcmlhbGl6YWJsZVN0b3JlKCkpO1xuXG4gICAgICBmbHV4LmRlc2VyaWFsaXplKGB7XG4gICAgICAgIFwiZm9vXCI6IFwiZm9vIHN0YXRlXCIsXG4gICAgICAgIFwiYmFyXCI6IFwiYmFyIHN0YXRlXCIsXG4gICAgICAgIFwiYmF6XCI6IFwiYmF6IHN0YXRlXCJcbiAgICAgIH1gKTtcblxuICAgICAgbGV0IGZvb1N0b3JlID0gZmx1eC5nZXRTdG9yZSgnZm9vJyk7XG4gICAgICBsZXQgYmFyU3RvcmUgPSBmbHV4LmdldFN0b3JlKCdiYXInKTtcbiAgICAgIGxldCBiYXpTdG9yZSA9IGZsdXguZ2V0U3RvcmUoJ2JheicpO1xuXG4gICAgICBleHBlY3QoZm9vU3RvcmUuc3RhdGUuc3RhdGVTdHJpbmcpLnRvLmVxdWFsKCdmb28gc3RhdGUnKTtcbiAgICAgIGV4cGVjdChmb29TdG9yZS5zdGF0ZS5kZXNlcmlhbGl6ZWQpLnRvLmJlLnRydWU7XG4gICAgICBleHBlY3QoYmFyU3RvcmUuc3RhdGUuc3RhdGVTdHJpbmcpLnRvLmVxdWFsKCdiYXIgc3RhdGUnKTtcbiAgICAgIGV4cGVjdChiYXJTdG9yZS5zdGF0ZS5kZXNlcmlhbGl6ZWQpLnRvLmJlLnRydWU7XG4gICAgICBleHBlY3QoYmF6U3RvcmUuc3RhdGUuc3RhdGVTdHJpbmcpLnRvLmVxdWFsKCdiYXogc3RhdGUnKTtcbiAgICAgIGV4cGVjdChiYXpTdG9yZS5zdGF0ZS5kZXNlcmlhbGl6ZWQpLnRvLmJlLnRydWU7XG4gICAgfSk7XG5cbiAgICBpdCgnd2FybnMgYW5kIHNraXBzIGlmIHBhc3NlZCBzdHJpbmcgaXMgaW52YWxpZCBKU09OJywgKCkgPT4ge1xuICAgICAgbGV0IGZsdXggPSBuZXcgRmx1eCgpO1xuICAgICAgY2xhc3MgVGVzdFN0b3JlIGV4dGVuZHMgU3RvcmUge31cblxuXG4gICAgICBmbHV4LmNyZWF0ZVN0b3JlKCdmb28nLCBUZXN0U3RvcmUpO1xuXG4gICAgICBleHBlY3QoZmx1eC5kZXNlcmlhbGl6ZS5iaW5kKGZsdXgsICdub3QgSlNPTicpKS50by50aHJvdyhcbiAgICAgICAgJ0ludmFsaWQgdmFsdWUgcGFzc2VkIHRvIGBGbHV4I2Rlc2VyaWFsaXplKClgOiBub3QgSlNPTidcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnd2FybnMgYW5kIHNraXBzIHN0b3JlcyB3aG9zZSBjbGFzc2VzIGRvIG5vdCBpbXBsZW1lbnQgLnNlcmlhbGl6ZSgpJywgKCkgPT4ge1xuICAgICAgbGV0IGZsdXggPSBuZXcgRmx1eCgpO1xuICAgICAgbGV0IHdhcm4gPSBzaW5vbi5zcHkoY29uc29sZSwgJ3dhcm4nKTtcblxuICAgICAgY2xhc3MgVGVzdFN0b3JlIGV4dGVuZHMgU3RvcmUge1xuICAgICAgICBzdGF0aWMgZGVzZXJpYWxpemUoKSB7XG4gICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZsdXguY3JlYXRlU3RvcmUoJ3Rlc3QnLCBUZXN0U3RvcmUpO1xuICAgICAgZmx1eC5kZXNlcmlhbGl6ZSgne1widGVzdFwiOiBcInRlc3Qgc3RhdGVcIn0nKTtcblxuICAgICAgZXhwZWN0KHdhcm4uZmlyc3RDYWxsLmFyZ3NbMF0pLnRvLmVxdWFsKFxuICAgICAgICAnVGhlIGNsYXNzIGBUZXN0U3RvcmVgIGhhcyBhIGBkZXNlcmlhbGl6ZSgpYCBtZXRob2QsIGJ1dCBubyAnXG4gICAgICArICdjb3JyZXNwb25kaW5nIGBzZXJpYWxpemUoKWAgbWV0aG9kLidcbiAgICAgICk7XG5cbiAgICAgIGNvbnNvbGUud2Fybi5yZXN0b3JlKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnaWdub3JlcyBzdG9yZXMgd2hvc2UgY2xhc3NlcyBkbyBub3QgaW1wbGVtZW50IC5kZXNlcmlhbGl6ZSgpJywgKCkgPT4ge1xuICAgICAgbGV0IGZsdXggPSBuZXcgRmx1eCgpO1xuICAgICAgY2xhc3MgVGVzdFN0b3JlIGV4dGVuZHMgU3RvcmUge31cblxuICAgICAgZmx1eC5jcmVhdGVTdG9yZSgnZm9vJywgY3JlYXRlU2VyaWFsaXphYmxlU3RvcmUoKSk7XG4gICAgICBmbHV4LmNyZWF0ZVN0b3JlKCdiYXInLCBjcmVhdGVTZXJpYWxpemFibGVTdG9yZSgpKTtcbiAgICAgIGZsdXguY3JlYXRlU3RvcmUoJ2JheicsIFRlc3RTdG9yZSk7XG5cbiAgICAgIGZsdXguZGVzZXJpYWxpemUoYHtcbiAgICAgICAgXCJmb29cIjogXCJmb28gc3RhdGVcIixcbiAgICAgICAgXCJiYXJcIjogXCJiYXIgc3RhdGVcIixcbiAgICAgICAgXCJiYXpcIjogXCJiYXogc3RhdGVcIlxuICAgICAgfWApO1xuXG4gICAgICBsZXQgZm9vU3RvcmUgPSBmbHV4LmdldFN0b3JlKCdmb28nKTtcbiAgICAgIGxldCBiYXJTdG9yZSA9IGZsdXguZ2V0U3RvcmUoJ2JhcicpO1xuICAgICAgbGV0IGJhelN0b3JlID0gZmx1eC5nZXRTdG9yZSgnYmF6Jyk7XG5cbiAgICAgIGV4cGVjdChmb29TdG9yZS5zdGF0ZS5zdGF0ZVN0cmluZykudG8uZXF1YWwoJ2ZvbyBzdGF0ZScpO1xuICAgICAgZXhwZWN0KGZvb1N0b3JlLnN0YXRlLmRlc2VyaWFsaXplZCkudG8uYmUudHJ1ZTtcbiAgICAgIGV4cGVjdChiYXJTdG9yZS5zdGF0ZS5zdGF0ZVN0cmluZykudG8uZXF1YWwoJ2JhciBzdGF0ZScpO1xuICAgICAgZXhwZWN0KGJhclN0b3JlLnN0YXRlLmRlc2VyaWFsaXplZCkudG8uYmUudHJ1ZTtcbiAgICAgIGV4cGVjdChiYXpTdG9yZS5zdGF0ZSkudG8uYmUudW5kZWZpbmVkO1xuICAgIH0pO1xuXG4gIH0pO1xuXG59KTtcbiJdfQ==